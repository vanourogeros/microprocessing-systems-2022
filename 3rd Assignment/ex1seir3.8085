	IN 10H
START:	
	MVI A,10H  		 ;SET UP THE DISPLAY
	STA 08D8H 
	STA 08D9H 
	STA 08DAH 
	STA 08DBH 	
	
	MVI A,1DH		;SET UP 6.5 RST
	SIM
	EI
	JMP START		;WAIT FOR INTRPT TO BE PRESSED

INTR_ROUTINE:
	MVI H,05H 		;COUNTER FOR DECADES
	MOV A,H
	DCR A		
	STA 08DDH		
	MVI A,05H		;INITIALIZE COUNTER TO 45 SECS
	STA 08DCH
	CALL COUNT		;SKIP SECONDS SO COUNTER STARTS FROM 45 SECS
UNITS:
	MVI A,09H		;COUNTER FOR UNITS
COUNT:
	STA 08DCH	
	CALL DISPLAY		
	DCR A 			
	CPI 00H 		;COMPARE UNIT WITH ZERO
	JNZ COUNT	 
	CALL ZERO		;IF LAST DIGIT IS ZERO RESTART
	DCR H		
	JZ START		;IF H==0 (LAST DECADE) FINISH COUNTING
	MOV A,H
	DCR A		
	STA 08DDH
	JMP UNITS		;RESTART
DISPLAY: 	
	LXI B,01F4H 		;INITIALIZE DELB
	LXI D,08D8H	
	PUSH PSW
	PUSH H			;STORE DECADES IN STACK
	CALL STDM
	CALL DCD
LIGHTS:	
	MVI A,00H
	STA 3000H
	CALL DELB
	MVI A,FFH
	STA 3000H
	CALL DELB
ZEROEND:			;CHECK IF COUNTER HAS REACHED A DIGIT ENDING IN ZERO
	DCR A
	CPI 00H
	JNZ ZEROEND
	POP H
	POP PSW
	EI
	RET
ZERO: 				
	MVI A,00H
	STA 08DCH
	CALL DISPLAY
	EI
	RET
END
	